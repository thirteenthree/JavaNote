### 17.5 线程安全



#### 17.5.1 线程不安全的三个条件

* 多线程并发;
* 共享数据;
* 共享数据有修改的行为;

#### 17.5.2 线程编程模型

* 异步编程模型:
  * 线程t1和线程t2,各自执行各自的,t1不管t2,t2不管t1,
    谁也不需要等谁;
  * 多线程并发(效率较高);
  * 异步就是并发;
* **同步编程模型**(解决线程不安全问题):
  * 线程t1和线程t2,在线程t1执行的时候,必须等待t2线程执行结束,或者说在t2线程执行的时候,必须等待t1线程执行结束;
  * 需要等待,效率低;
  * 同步就是排队;

#### 17.5.3 数据的安全问题

* 线程安全:
  * 局部变量(栈);
  * 常量;
  * Vector;
  * Hashtable;
  * StringBuffer;
* 非线程安全的:
  * 实例变量(堆),因为只有一个共享堆;
  * 静态变量(方法区),因为只有一个方法去;
  * ArrayList;
  * HashMap
  * HashSet;
  * StringBuilder(采用局部变量,既有效率,又能安全);